from news.models import *
u1 = User.objects.create_user(username='Alex')
u2 = User.objects.create_user(username='Jhon')
A1 = Author.objects.create(authorUser = u1)
A2 = Author.objects.create(authorUser = u2)
cat1 = Category.objects.create(name = "Спорт")
cat2 = Category.objects.create(name = "Политика")
cat3 = Category.objects.create(name = "Образование")
cat4 = Category.objects.create(name = "Кино")
art1 = Post.objects.create(categoryType= Post.ARTICLE, title= "Первая статья", text= "Этот контент первой статьи", author= A1)
art2 = Post.objects.create(categoryType= Post.ARTICLE, title= "Вторая статья", text= "Этот контент второй статьи", author= A2)
nw1 = Post.objects.create(categoryType= Post.NEWS, title= "Новости спорт", text= "Этот контент первой новости", author= A2)
art1.postCategory.add(cat1)
art1.postCategory.add(cat2)
art2.postCategory.add(cat3)
art2.postCategory.add(cat4)
nw1.postCategory.add(cat1)
nw1.postCategory.add(cat3)
comment1 = Comment.objects.create(commentThrough= art1, commentUser= u1, text= "Это первая коментаря")
comment2 = Comment.objects.create(commentThrough= art1, commentUser= u2, text= "Это вторая коментаря")
comment3 = Comment.objects.create(commentThrough= art2, commentUser= u1, text= "Это 3-коментаря")
comment4 = Comment.objects.create(commentThrough= nw1, commentUser= u2, text= "Это 4-коментаря")
comment1.like()
comment2.like()
comment2.like()
comment3.like()
comment3.like()
comment3.like()
comment3.dislike()
comment4.like()
comment4.like()
comment4.dislike()
comment4.dislike()
comment4.dislike()
art1.like()
art1.like()
art1.like()
art1.like()
art2.dislike()
art2.dislike()
nw1.like()
nw1.like()
nw1.like()
nw1.dislike()
Author.objects.order_by("-ratingAuthor").values("authorUser__username", "ratingAuthor")[0]
bestpost = Post.objects.order_by("-rating").values("author__authorUser__username",'pk', "title","text", "rating", "dateCreation")[0]
comment = Comment.objects.filter(commentThrough= bestpost['pk']).values("commentUser", "text", "dateCreation", "rating")